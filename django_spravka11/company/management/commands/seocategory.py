# coding: utf-8

from django.conf import settings
from django.core.management.base import NoArgsCommand

from company.models import SeoCategory, Category, Address

class Command(NoArgsCommand):
    def handle_noargs(self, **options):

        cat_seocat = {
                'Продажа легковых автомобилей | Автосалоны':['Автосалоны'],
                'Спецавтотехника':['Спецтехника'],
                'Автозапчасти':['Автозапчасти'],
                'Автошины | Диски':['Шины и диски'],
                'Автоателье':['Автосервис'],
                'Автозаправочные станции (АЗС)':['Автосервис', 'АЗС'],
                'Автозвуковое оборудование: установка':['Автосервис'],
                'Автомойки':['Автосервис','Автомойки'],
                'Автосигнализации: продажа|установка':['Автосервис'],
                'Автостоянки, гаражи':['Автосервис'],
                'Автоэкспертиза':['Автосервис'],
                'Антикоррозийная обработка':['Автосервис'],
                'Диагностика | ремонт двигателей':['Автосервис'],
                'Кузовной ремонт | Окраска автомобилей':['Автосервис'],
                'Пункты технического осмотра':['Автосервис'],
                'Развал | Схождение':['Автосервис'],
                'Ремонт | Заправка кондиционеров':['Автосервис'],
                'Ремонт автоэлектрики':['Автосервис'],
                'Ремонт КПП, АКПП':['Автосервис'],
                'Ремонт мототехники':['Автосервис'],
                'Ремонт спецавтотехники':['Автосервис'],
                'Станции технического обслуживания (СТО)':['Автосервис'],
                'Техпомощь на дороге':['Автосервис'],
                'Тонирование автостекол':['Автосервис'],
                'Шиномонтаж':['Автосервис','Шиномонтаж'],
                'Эвакуация автомобилей':['Автоэвакуатор'],
                'Заказ такси':['Такси'],
                'Прокат автотранспорта':['Прокат автомобилей','Авто на свадьбу'],
                'Грузоперевозки городские':['Грузоперевозки'],
                'Грузоперевозки железнодорожные':['Грузоперевозки'],
                'Грузоперевозки междугородние | международные':['Грузоперевозки'],
                'Грузоперевозки речные | морские':['Грузоперевозки'],
                'Автострахование':['Автострахование'],
                'Мототехника':['Мотоциклы'],
                'Снегоходы':['Квадроциклы, гидроциклы, снегоходы'],

                'Бетон':['Строительные материалы'],
                'Ворота и шлагбаумы':['Строительные материалы'],
                'Гидроизоляционные материалы':['Строительные материалы'],
                'Гипсокартон':['Строительные материалы'],
                'Двери | Комплектующие':['Строительные материалы','Двери'],
                'Дренажные системы':['Строительные материалы'],
                'ДСП | ДВП | Фанера':['Строительные материалы'],
                'Железобетонные изделия':['Строительные материалы'],
                'Заборы | Ограждения':['Строительные материалы'],
                'Замки | Скобяные изделия':['Строительные материалы'],
                'Звукоизоляционные материалы':['Строительные материалы'],
                'Камень облицовочный':['Строительные материалы'],
                'Кафель | Керамическая плитка | Резиновая плитка':['Строительные материалы'],
                'Кирпич | Шлакоблоки':['Строительные материалы'],
                'Клеи | Герметики':['Строительные материалы'],
                'Крепежные изделия':['Строительные материалы'],
                'Кровельные материалы':['Строительные материалы'],
                'Лакокрасочная продукция':['Строительные материалы'],
                'Магазины строительных и отделочных материалов':['Строительные материалы'],
                'Металлоконструкции':['Строительные материалы','Металлоконструкции'],
                'Напольные покрытия | Комплектующие':['Строительные материалы'],
                'Обои':['Строительные материалы'],
                'Оборудование для производства строительных материалов':['Строительные материалы'],
                'Окна | Витражи |Лоджии | Балконы':['Строительные материалы','Окна'],
                'Оргстекло | пластики':['Строительные материалы'],
                'Перегородки':['Строительные материалы'],
                'Песок | Щебень':['Строительные материалы'],
                'Пиломатериалы':['Строительные материалы'],
                'Полы':['Строительные материалы'],
                'Потолки':['Строительные материалы'],
                'Растворители':['Строительные материалы'],
                'Стекло | Зеркала':['Строительные материалы'],
                'Стеновые панели':['Строительные материалы'],
                'Сухие строительные смеси':['Строительные материалы'],
                'Теплоизоляционные материалы':['Строительные материалы'],
                'Трубы, трубопроводы, арматура':['Строительные материалы'],
                'Фасадные материалы':['Строительные материалы'],
                'Цемент':['Строительные материалы'],
                'Деревянное домостроение':['Строительство домов'],
                'Жилищное строительство':['Строительство домов'],
                'Коммерческое строительство':['Строительство домов'],
                'Промышленное строительство':['Строительство домов'],
                'Реконструкция и капремонт зданий':['Строительство домов'],
                'Строительство АЗС':['Строительство домов'],
                'Строительство бань | саун':['Строительство домов'],
                'Строительство и монтаж бассейнов':['Строительство домов'],
                'Абразивный инструмент':['Инструменты'],
                'Деревообрабатывающий инструмент':['Инструменты'],
                'Измерительный инструмент':['Инструменты'],
                'Малярный инструмент':['Инструменты'],
                'Пневмоинструмент':['Инструменты'],
                'Ремонт инструмента':['Инструменты'],
                'Ручной инструмент':['Инструменты'],
                'Слесарно-монтажный инструмент':['Инструменты'],
                'Хозяйственный инструмент':['Инструменты'],
                'Электроинструмент':['Инструменты'],
                'Сантехника | санфаянс':['Сантехника'],
                'Кабель | Провод':['Электрика'],
                'Радиоэлектронные приборы':['Электрика'],
                'Ремонт электродвигателей':['Электрика'],
                'Светотехника | Светильники':['Электрика'],
                'Электродвигатели | Редукторы':['Электрика'],
                'Электроизоляционные материалы':['Электрика'],
                'Электронагревательное оборудование':['Электрика'],
                'Электротехническое оборудование':['Электрика'],
                'Элементы питания':['Электрика'],
                'Кондиционеры':['Кондиционеры'],
                'Ремонт | Отделка помещений':['Отделочные работы'],
                'Дизайн интерьеров':['Дизайн интерьера'],
                'Ландшафтный дизайн':['Ландшафтные работы'],
                'Недвижимость: покупка, продажа, аренда':['Агентства недвижимости'],
                'Аренда нежилых помещений':['Коммерческая недвижимость'],
                'Бизнес-центры':['Бизнес-центры'],
                'Кредитование | Ипотека':['Ипотека'],
                'Страховые компании':['Страхование'],
                'Земля':['Земельные участки'],

                'Кафе | Кофейни':['Кафе','Залы для банкета','Банкетные залы'],
                'Рестораны':['Рестораны','Залы для банкета','Банкетные залы'],
                'Бары':['Бары'],
                'Пиццерии':['Пиццерии'],
                'Столовые':['Столовые','Залы для банкета','Банкетные залы'],
                'Фастфуд':['Фастфуды'],
                'Доставка готовых блюд':['Доставка обедов'],

                'Кинотеатры':['Кинотеатры'],
                'Театры':['Театры'],
                'Аттракционы':['Развлекательные центры'],
                'Бани | Сауны':['Развлекательные центры','Сауны'],
                'Бильярд':['Развлекательные центры'],
                'Боулинг':['Развлекательные центры'],
                'Букмекерские конторы | Лотереи':['Развлекательные центры'],
                'Караоке-бары':['Развлекательные центры'],
                'Кинотеатры':['Развлекательные центры'],
                'Ночные клубы':['Развлекательные центры','Ночные клубы'],
                'Парки и зоны отдыха':['Развлекательные центры','Достопримечательности'],
                'Пейнтбол | Страйкбол | Тир':['Развлекательные центры','Пейнтбол'],
                'Центры творчества и досуга':['Развлекательные центры'],
                'Гостиницы | Отели':['Гостиницы'],
                'Базы отдыха | Пансионаты':['Базы отдыха','Турбазы'],

                'Торговые центры | Универмаги':['Торговые центры'],
                'Бижутерия':['Магазины одежды','Бижутерия'],
                'Верхняя одежда':['Магазины одежды'],
                'Вечерние платья':['Магазины одежды'],
                'Головные уборы':['Магазины одежды'],
                'Джинсовая | Молодежная одежда':['Магазины одежды'],
                'Женская одежда':['Магазины одежды'],
                'Меха | Кожа':['Магазины одежды','Магазины кожи и меха'],
                'Мужская одежда':['Магазины одежды','Мужские костюмы'],
                'Нижнее белье':['Магазины одежды','Белье'],
                'Одежда для беременных':['Магазины одежды'],
                'Свадебные салоны':['Магазины одежды','Свадебные салоны','Свадебные платья'],
                'Спецодежда':['Магазины одежды'],
                'Спортивная и танцевальная одежда':['Магазины одежды','Спортивная одежда и обувь'],
                'Сумки | Кожгалантерея':['Магазины одежды','Сумки'],
                'Сэконд-хэнд | Second-hand':['Магазины одежды'],
                'Трикотажные изделия':['Магазины одежды'],
                'Чулки | Носки | Колготки':['Магазины одежды'],
                'Обувные магазины | Отделы':['Обувь'],
                'Ателье меховые':['Ателье'],
                'Ателье трикотажные':['Ателье'],
                'Ателье швейные':['Ателье'],
                'Швейное производство':['Ателье'],
                'Ювелирные изделия':['Ювелирные магазины'],

                'Бескаркасная мебель':['Магазины мебели'],
                'Мебель детская':['Магазины мебели'],
                'Мебель для ванных комнат':['Магазины мебели'],
                'Мебель для кухни':['Магазины мебели'],
                'Мебель из стекла':['Магазины мебели'],
                'Мебель корпусная':['Магазины мебели'],
                'Мебель металлическая':['Магазины мебели'],
                'Мебель мягкая':['Магазины мебели','Мягкая мебель'],
                'Мебель на заказ':['Магазины мебели','Мебель на заказ'],
                'Мебель офисная':['Магазины мебели','Офисная мебель'],
                'Мебель плетеная':['Магазины мебели'],
                'Мебель специализированная':['Магазины мебели'],
                'Производство мебели':['Магазины мебели'],
                'Ремонт | перетяжка мебели':['Магазины мебели','Ремонт мебели'],
                'Сейфы':['Магазины мебели'],
                'Багет, рамы':['Предметы интерьера'],
                'Жалюзи | рольставни':['Предметы интерьера'],
                'Зеркала':['Предметы интерьера'],
                'Камины':['Предметы интерьера'],
                'Карнизы':['Предметы интерьера'],
                'Картины':['Предметы интерьера'],
                'Керамические изделия':['Предметы интерьера'],
                'Кованые изделия':['Предметы интерьера'],

                'Салоны красоты':['Салоны красоты','Свадебные прически'],
                'Косметические салоны':['Косметология'],
                'Парикмахерские':['Парикмахерские'],
                'Студии загара':['Солярий'],
                'Художественная татуировка | пирсинг':['Тату и пирсинг'],
                'Косметика | Парфюмерия':['Косметика и парфюмерия','Магазины косметики'],
                'Танцевальные студии':['Танцы'],
                'Фитнес-клубы':['Фитнес-клубы','Йога'],
                'Тренажёрные залы':['Тренажерные залы'],

                'Бытовая техника и электроника':['Бытовая техника'],
                'Компьютеры | Комплектующие':['Компьютеры','Расходные материалы'],
                'Оргтехника':['Оргтехника'],
                'Расходные материалы для оргтехники':['Расходные материалы'],
                'Ремонт оргтехники':['Ремонт оргтехники'],
                'Мобильные телефоны | Аксессуары':['Мобильные телефоны'],
                'Операторы мобильной связи':['Сотовые операторы'],
                'Программное обеспечение':['Программное обеспечение'],

                'Медицинские многопрофильные центры':['Медицинские центры'],
                'Стоматология':['Стоматология'],
                'Аптеки':['Аптеки'],
                'Оптика':['Оптика'],
                'Бассейны':['Бассейны'],
                'Массаж: услуги':['Массаж'],
                'Санатории | Профилактории':['Оздоровительные центры','Санатории и пансионаты'],
                'Туристические фирмы | агентства':['Турагентства'],
                'Детские лагеря':['Детские лагеря отдыха'],
                'Авиабилеты':['Продажа билетов'],
                'Железнодорожные билеты':['Продажа билетов'],
                'Автовокзалы | Автобусные кассы':['Продажа билетов'],
                'Паспортно-визовый контроль | Миграционная служба':['Визы и паспорта'],

                'PR-агентства':['Реклама'],
                'Бизнес-сувениры':['Реклама'],
                'Дизайн рекламы':['Реклама'],
                'Курьерские службы':['Реклама'],
                'Маркетинговые услуги':['Реклама'],
                'Модельные агентства':['Реклама'],
                'Организация выставок, презентаций':['Реклама'],
                'Реклама в СМИ':['Реклама'],
                'Реклама наружная: изготовление и монтаж':['Реклама'],
                'Рекламные агентства':['Реклама'],
                'Студии видеозаписи | звукозаписи':['Реклама'],
                'Фотостудии':['Реклама','Фотостудии'],
                'Оперативная полиграфия':['Полиграфия'],
                'Изготовление печатей | штампов':['Печати и штампы'],
                'Газеты | Журналы':['СМИ'],
                'Информационные сайты':['СМИ'],
                'Радио':['СМИ'],
                'Справочники':['СМИ'],
                'Телевидение':['СМИ'],
                'Колл-Центры':['Контакт-центр'],
                'Разработка WEB-сайтов':['Создание сайтов'],
                'Кадровые агентства':['Кадровые агентства'],
                'Бухгалтерские услуги':['Бухгалтерские услуги'],
                'Адвокатские услуги':['Юридические услуги'],
                'Бракоразводные агентства':['Юридические услуги'],
                'Взыскание ущерба | долгов':['Юридические услуги'],
                'Защита авторских прав':['Юридические услуги'],
                'Защита прав потребителей':['Юридические услуги'],
                'Нотариальные услуги':['Юридические услуги'],
                'Оценка собственности':['Юридические услуги'],
                'Представительство в суде':['Юридические услуги'],
                'Регистрация | ликвидация предприятий':['Юридические услуги'],
                'Сертификация | Лицензирование':['Юридические услуги'],
                'Таможенное оформление':['Юридические услуги'],
                'Экспертиза':['Юридические услуги'],
                'Юридическое обслуживание предприятий':['Юридические услуги'],

                'Автошколы':['Автошколы','Курсы'],
                'Бухгалтерские курсы':['Курсы'],
                'Бюро переводов с иностранных языков':['Курсы'],
                'Компьютерные курсы':['Курсы'],
                'Курсы для будущих мам':['Курсы'],
                'Курсы разные':['Курсы'],
                'Обучение визажистов | парикмахеров | мастеров маникюра':['Курсы'],
                'Обучение за рубежом':['Курсы'],
                'Обучение сотрудников охраны':['Курсы'],
                'Переподготовка |  Повышение квалификации':['Курсы'],
                'Репетиторство | Помощь в обучении':['Курсы'],
                'Школы иностранных языков':['Курсы'],
                'Академии':['ВУЗы'],
                'Институты':['ВУЗы'],
                'Университеты':['ВУЗы'],
                'Колледжи':['Колледжи'],
                'Техникумы':['Техникумы'],
                'Лицеи':['Лицеи'],
                'Школы':['Школы'],

                'Детские сады':['Детские садики'],
                'Музыкальные школы':['Развивающие центры'],
                'Художественные школы':['Развивающие центры'],
                'Центры раннего развития':['Развивающие центры'],
                'Школы искусств':['Развивающие центры'],
                'Детская одежда | Обувь':['Детская одежда'],
                'Товары для детского творчества':['Детские товары'],
                'Детское питание':['Детское питание'],

                'Банки':['Банки','Денежные переводы'],
                'Обмен валюты':['Обмен валют'],
                'Лизинговые услуги':['Лизинг'],
                'Финансовый консалтинг':['Финансовые организации'],

                'ЗАГС':['ЗАГСы'],
                'Фото и видео съемка':['Свадебные фотографы','Свадебное видео','Видеосъемка'],
                'Организация праздников':['Тамады и ведущие','Организация праздников'],
                'Цветы':['Магазины цветов'],
                'Подарки | Сувениры':['Подарки']
        }

        # get all second level seocats 
        seo_cats = {x.name:x for x in SeoCategory.objects.filter(parent_id__isnull=False)}

        # get all address and
        addresses = Address.objects.all()
        for ad in addresses:
            # ad = Address.objects.get(company_id=80018)
            cat_list = ad.category.all().values_list('name', flat=True)
            # ad.seo_category.clear()
            # print(1)
            
            s_cat = []
            for cat in cat_list:
                if cat in cat_seocat:
                    s_cat.extend(cat_seocat[cat])
 
            if s_cat:
                for s_c in s_cat:
                    if s_c in seo_cats:
                        ad.seo_category.add(seo_cats[s_c])
                print('add seo cats', ad.company_id, ad.company, ad.id)
            else:
                print('pass')